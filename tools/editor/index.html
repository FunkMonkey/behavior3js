<!DOCTYPE html>
<html>
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">

  <title>Behavior3JS Editor</title>

  <script type="text/javascript" src="js/preload.min.js"></script>
  <link href="css/normalize.css" rel="stylesheet">
  <link href="css/preload.css" rel="stylesheet">

  <script type="text/javascript">
    var loader, app;

    function preload() {
      var domProgress = document.getElementById('loading-progress');
      var domLoading = document.getElementById('loading-text');
      
      loader = new createjs.LoadQueue(true);
      loader.on('progress', function(event) {
        domProgress.innerHTML = Math.floor(event.progress*100)+'%';
      });
      loader.on('complete', function(event) {
        domLoading.innerHTML = 'Initializing editor components, please wait...';

        app.initialize();

        // hide preload
        $('#preloading').fadeOut(250);
      });
      loader.loadManifest([
        // SCRIPT
        {id:'', src:'js/font.opensans.js'},
        {id:'', src:'js/jquery-2.1.1.min.js'},
        {id:'', src:'js/jquery.ui.min.js'},
        {id:'', src:'js/foundation.min.js'},
        {id:'', src:'js/easel.min.js'},
        {id:'', src:'js/creatine-0.2.0dev.min.js'},
        {id:'', src:'js/handlebars-v2.0.0.js'},
        {id:'', src:'js/keymaster.js'},
        {id:'', src:'js/nano-scroll.js'},
        {id:'', src:'js/collapsable.js'},
        {id:'', src:'js/b3core.0.1.0.min.js'},
        {id:'', src:'js/b3view.0.1.0.min.js'},
        {id:'', src:'js/notify.min.js'},
        
        // IMG
        {id:'', src:'img/closedhand.cur'},

        // STYLE
        {id:'', src:'css/normalize.css'},
        {id:'', src:'css/foundation.min.css'},
        {id:'', src:'css/font-awesome.min.css'},
        {id:'', src:'css/nano-scroll.css'},
        {id:'', src:'css/editor.css'},

        // BEHAVIOR3 EDITOR
        {id:'', src:'b3editor/Editor.js'},
        {id:'', src:'b3editor/utils/UI.js'},
        {id:'', src:'b3editor/data/options.js'},
        {id:'', src:'b3editor/data/shortcuts.js'},
        {id:'', src:'b3editor/entities/SelectionBox.js'},
        {id:'', src:'b3editor/systems/CameraSystem.js'},
        {id:'', src:'b3editor/systems/SelectionSystem.js'},
        {id:'', src:'b3editor/systems/DragSystem.js'},
        {id:'', src:'b3editor/systems/FactorySystem.js'},
        {id:'', src:'b3editor/systems/ConnectionSystem.js'},

        // WEB APP
        {id:'', src:'app/helpers.js'},
        {id:'', src:'app/events.js'},
        {id:'', src:'app/app.js'},
        {id:'view-menu', src:'app/views/menu.html'},
        {id:'view-left', src:'app/views/left.html'},
        {id:'view-right', src:'app/views/right.html'},
        {id:'view-canvas', src:'app/views/canvas.html'},
        {id:'view-modal-newtree', src:'app/views/modal_newtree.html'},
        {id:'view-modal-importtree', src:'app/views/modal_importtree.html'},
        {id:'view-modal-exporttree', src:'app/views/modal_exporttree.html'},
        {id:'view-modal-addnode', src:'app/views/modal_addnode.html'},
        {id:'view-modal-editnode', src:'app/views/modal_editnode.html'},
        {id:'view-modal-firsttime', src:'app/views/modal_firsttime.html'},
        {id:'view-joyride', src:'app/views/joyride.html'},
      ])
    }
  </script>

</head>

<body onload="preload();">

  <div id="preloading">
    <div class="content">
      <img src="img/loading.gif" alt="Loading"/>
      <p id="loading-text">Loading, please wait... <span id="loading-progress">0%</span></p>
    </div>
  </div>

  <div id="page">
  </div>

</body>
</html>